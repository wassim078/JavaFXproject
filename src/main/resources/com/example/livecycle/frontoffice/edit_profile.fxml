<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.paint.*?>

<StackPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.example.livecycle.controllers.frontoffice.EditProfileController"
           stylesheets="@../css/edit_profile.css" styleClass="gradient-background">

    <!-- Background with green gradient blur -->
    <Rectangle width="610" height="900">
        <effect>
            <GaussianBlur radius="10" />
        </effect>
        <fill>
            <LinearGradient startX="0" startY="0" endX="1" endY="1">
                <stops>
                    <Stop color="#e8f5e9" offset="0.0"/>
                    <Stop color="#c8e6c9" offset="1.0"/>

                </stops>
            </LinearGradient>
        </fill>
    </Rectangle>


    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" >
        <HBox alignment="CENTER" styleClass="scroll-content-wrapper">
    <!-- White content container -->
    <VBox fx:id="formContainer"  styleClass="form-container"  alignment="TOP_CENTER" spacing="20" maxWidth="600">
        <!-- Avatar image with click handler -->
        <HBox alignment="CENTER">
            <ImageView fx:id="userImageView"
                       fitWidth="100"
                       fitHeight="100"
                       onMouseClicked="#handleImageClick"
                       styleClass="avatar"/>
        </HBox>

        <!-- Form title -->
        <Label text="Edit Profile" styleClass="form-title"/>

        <!-- Main form content -->
        <GridPane hgap="15" vgap="15" styleClass="form-grid">
            <columnConstraints>
                <ColumnConstraints prefWidth="120" halignment="RIGHT"/>
                <ColumnConstraints prefWidth="300" hgrow="ALWAYS"/>
            </columnConstraints>

            <!-- Form Rows -->
            <!-- Modified Form Rows with error labels -->
            <Label text="Prénom:" styleClass="form-label" GridPane.rowIndex="0"/>
            <TextField fx:id="prenomField" styleClass="text-field" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
            <Label fx:id="prenomError" styleClass="error-label" GridPane.rowIndex="1" GridPane.columnIndex="1" />

            <Label text="Nom:" styleClass="form-label" GridPane.rowIndex="2"/>
            <TextField fx:id="nomField" styleClass="text-field" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
            <Label fx:id="nomError" styleClass="error-label" GridPane.rowIndex="3" GridPane.columnIndex="1" />

            <Label text="Email:" styleClass="form-label" GridPane.rowIndex="4"/>
            <TextField fx:id="emailField" styleClass="text-field" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
            <Label fx:id="emailError" styleClass="error-label" GridPane.rowIndex="5" GridPane.columnIndex="1" />

            <Label text="Téléphone:" styleClass="form-label" GridPane.rowIndex="6"/>
            <TextField fx:id="telephoneField" styleClass="text-field" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
            <Label fx:id="telephoneError" styleClass="error-label" GridPane.rowIndex="7" GridPane.columnIndex="1" />

            <Label text="Adresse:" styleClass="form-label" GridPane.rowIndex="8"/>
            <TextField fx:id="adresseField" styleClass="text-field" GridPane.rowIndex="8" GridPane.columnIndex="1"/>
            <Label fx:id="adresseError" styleClass="error-label" GridPane.rowIndex="9" GridPane.columnIndex="1" />

            <!-- Password Section -->
            <Label text="Roles:" styleClass="form-label" GridPane.rowIndex="10"/>
            <Label fx:id="rolesLabel" styleClass="form-label" GridPane.rowIndex="10" GridPane.columnIndex="1"/>

            <Label text="Current Password:" styleClass="form-label" GridPane.rowIndex="11"/>
            <PasswordField fx:id="currentPasswordField" styleClass="text-field" GridPane.rowIndex="11" GridPane.columnIndex="1"/>
            <Label fx:id="currentPasswordError" styleClass="error-label" GridPane.rowIndex="12" GridPane.columnIndex="1" />

            <Label text="New Password:" styleClass="form-label" GridPane.rowIndex="13"/>
            <PasswordField fx:id="newPasswordField" styleClass="text-field" GridPane.rowIndex="13" GridPane.columnIndex="1"/>
            <Label fx:id="newPasswordError" styleClass="error-label" GridPane.rowIndex="14" GridPane.columnIndex="1" />

            <Label text="Confirm Password:" styleClass="form-label" GridPane.rowIndex="15"/>
            <PasswordField fx:id="confirmPasswordField" styleClass="text-field" GridPane.rowIndex="15" GridPane.columnIndex="1"/>
            <Label fx:id="confirmPasswordError" styleClass="error-label" GridPane.rowIndex="16" GridPane.columnIndex="1" />
        </GridPane>

        <!-- Save Button -->
        <HBox alignment="CENTER" spacing="15" styleClass="button-container">
            <Button text="Save" styleClass="save-button" onAction="#handleSaveChanges"/>
        </HBox>


        <Pane VBox.vgrow="ALWAYS" />
    </VBox>
        </HBox>
    </ScrollPane>
</StackPane>